{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/jack/Apps/minimal-stopwatch/features/stopwatch/components/timer-card.tsx"],"sourcesContent":["import { useState, MouseEvent, DragEvent } from \"react\";\nimport type { Timer } from \"@/features/stopwatch/types\";\nimport {\n  Play,\n  Pause,\n  Square,\n  Maximize2,\n  Minimize2,\n  Trash2,\n  GripVertical,\n} from \"lucide-react\";\n\ntype TimerCardProps = {\n  timer: Timer;\n  totalTimers: number;\n  isZenMode: boolean;\n  isBeingDragged: boolean;\n  onToggle: () => void;\n  onReset: () => void;\n  onDelete: () => void;\n  onUpdateLabel: (label: string) => void;\n  onDragStart: (event: DragEvent<HTMLDivElement>) => void;\n  onDragOver: (event: DragEvent<HTMLDivElement>) => void;\n  onDrop: (event: DragEvent<HTMLDivElement>) => void;\n};\n\nexport default function TimerCard(props: TimerCardProps) {\n  const {\n    timer,\n    totalTimers,\n    isZenMode,\n    isBeingDragged,\n    onToggle,\n    onReset,\n    onDelete,\n    onUpdateLabel,\n    onDragStart,\n    onDragOver,\n    onDrop,\n  } = props;\n\n  const [isFocused, setIsFocused] = useState(false);\n\n  const handleToggleFocus = (event: MouseEvent<HTMLButtonElement>) => {\n    event.stopPropagation();\n    setIsFocused((value) => !value);\n  };\n\n  const handleDelete = (event: MouseEvent<HTMLButtonElement>) => {\n    event.stopPropagation();\n    onDelete();\n  };\n\n  const minutes = Math.floor(timer.elapsedMs / 60000);\n  const seconds = Math.floor((timer.elapsedMs % 60000) / 1000);\n  const milliseconds = Math.floor((timer.elapsedMs % 1000) / 10);\n\n  const sizeClasses = isFocused\n    ? \"text-[18vw] sm:text-[12rem] font-normal\"\n    : \"text-[12vw] sm:text-[8rem] font-normal\";\n\n  const subSizeClasses = isFocused\n    ? \"text-[9vw] sm:text-[6rem] text-chrono-fg-muted mx-1\"\n    : \"text-[6vw] sm:text-[4rem] text-chrono-fg-muted mx-1\";\n\n  const msSizeClasses = isFocused\n    ? \"text-[6vw] sm:text-[4rem] font-light ml-2 w-[7vw] sm:w-[9rem] text-left\"\n    : \"text-[4vw] sm:text-[3rem] font-light ml-2 w-[5vw] sm:w-[6rem] text-left\";\n\n  const containerClasses = isFocused\n    ? \"fixed inset-0 z-50 bg-chrono-bg-page flex flex-col items-center justify-center gap-10\"\n    : [\n        \"relative group flex flex-col items-center justify-center pt-20 pb-12 px-8 rounded-2xl border w-full max-w-4xl mx-auto transition-all duration-300\",\n        timer.isRunning\n          ? \"bg-chrono-bg-card border-chrono-border-subtle shadow-chrono-glow\"\n          : \"bg-chrono-bg-card border-chrono-border-subtle\",\n      ]\n        .filter(Boolean)\n        .join(\" \");\n\n  return (\n    <div\n      className={containerClasses}\n      draggable={!isFocused}\n      onDragStart={onDragStart}\n      onDragOver={onDragOver}\n      onDrop={onDrop}\n    >\n      <div\n        className={[\n          \"flex justify-between items-center w-full absolute top-0 pt-6 px-6 transition-opacity duration-300\",\n          isFocused ? \"top-6\" : \"\",\n          isZenMode && !isFocused\n            ? \"opacity-0 group-hover:opacity-100\"\n            : \"opacity-100\",\n        ]\n          .filter(Boolean)\n          .join(\" \")}\n      >\n        {isFocused ? (\n          <div className=\"text-sm text-chrono-fg-muted\">\n            {timer.label}\n          </div>\n        ) : (\n          <div className=\"transition-all duration-300\">\n            <input\n              type=\"text\"\n              value={timer.label}\n              onChange={(event) => onUpdateLabel(event.target.value)}\n              placeholder=\"Timer name\"\n              className=\"bg-transparent text-left outline-none border-b border-transparent focus:border-chrono-accent/50 transition-all text-chrono-fg-muted focus:text-chrono-accent text-lg placeholder:text-muted-foreground\"\n            />\n          </div>\n        )}\n\n        <div\n          className={[\n            \"flex gap-2 items-center ml-auto\",\n            isFocused ? \"absolute top-6 right-6\" : \"\",\n          ].join(\" \")}\n        >\n          {!isFocused && totalTimers > 1 && (\n            <div\n              className=\"p-1 text-muted-foreground hover:text-foreground transition-colors cursor-grab\"\n              title=\"Drag to reorder\"\n            >\n              <GripVertical size={20} />\n            </div>\n          )}\n\n          {!isFocused && totalTimers > 1 && (\n            <button\n              onClick={handleDelete}\n              className=\"p-1 rounded-full text-muted-foreground hover:text-chrono-danger transition-colors\"\n              title=\"Delete timer\"\n            >\n              <Trash2 size={20} />\n            </button>\n          )}\n\n          <button\n            onClick={handleToggleFocus}\n            className={[\n              \"p-1 rounded-full transition-colors\",\n              isFocused\n                ? \"text-chrono-accent text-2xl\"\n                : \"text-muted-foreground hover:text-chrono-accent\",\n            ]\n              .filter(Boolean)\n              .join(\" \")}\n            title={isFocused ? \"Exit focus\" : \"Focus mode\"}\n          >\n            {isFocused ? <Minimize2 size={24} /> : <Maximize2 size={20} />}\n          </button>\n        </div>\n      </div>\n\n      <div\n        onClick={onToggle}\n        className=\"cursor-pointer transition-transform duration-200 active:scale-95\"\n      >\n        <div className=\"flex items-baseline font-chronoNumber chrono-number tracking-tight leading-none select-none transition-all duration-500\">\n          <span className={sizeClasses + \" text-foreground\"}>\n            {minutes.toString().padStart(2, \"0\")}\n          </span>\n          <span className={subSizeClasses}>:</span>\n          <span className={sizeClasses + \" text-foreground\"}>\n            {seconds.toString().padStart(2, \"0\")}\n          </span>\n          <span className={msSizeClasses}>\n            .{milliseconds.toString().padStart(2, \"0\")}\n          </span>\n        </div>\n      </div>\n\n      <div\n        className={[\n          \"flex gap-4 transition-all duration-300 justify-center\",\n          isFocused ? \"mt-12 scale-150\" : \"mt-6\",\n          isZenMode && !isFocused\n            ? \"opacity-0 group-hover:opacity-100\"\n            : \"opacity-100\",\n        ]\n          .filter(Boolean)\n          .join(\" \")}\n      >\n        <button\n          onClick={onReset}\n          className=\"p-2 rounded-full bg-transparent text-foreground hover:bg-muted hover:text-chrono-accent transition-all duration-200\"\n          title=\"Stop and reset\"\n        >\n          <Square size={18} />\n        </button>\n\n        <button\n          onClick={onToggle}\n          className={[\n            \"p-2 rounded-full bg-transparent transition-all duration-200 hover:bg-muted hover:text-chrono-accent\",\n            timer.isRunning ? \"text-chrono-accent\" : \"text-foreground\",\n          ].join(\" \")}\n          title={timer.isRunning ? \"Pause\" : \"Start\"}\n        >\n          {timer.isRunning ? (\n            <Pause size={18} />\n          ) : (\n            <Play size={18} />\n          )}\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///home/jack/Apps/minimal-stopwatch/features/stopwatch/components/compact-timer-card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport type { Timer } from \"@/features/stopwatch/types\";\nimport { Play, Pause, Square, Maximize2, Trash2 } from \"lucide-react\";\n\ntype CompactTimerCardProps = {\n  timer: Timer;\n  isPrimary: boolean;\n  isZenMode: boolean;\n  isBeingDragged: boolean;\n  onToggle: () => void;\n  onReset: () => void;\n  onDelete: () => void;\n  onUpdateLabel: (label: string) => void;\n  onPromote: () => void;\n  onDragStart: (event: any) => void;\n  onDragOver: (event: any) => void;\n  onDrop: (event: any) => void;\n};\n\nexport default function CompactTimerCard(props: CompactTimerCardProps) {\n  const {\n    timer,\n    isPrimary,\n    isZenMode,\n    isBeingDragged,\n    onToggle,\n    onReset,\n    onDelete,\n    onUpdateLabel,\n    onPromote,\n    onDragStart,\n    onDragOver,\n    onDrop,\n  } = props;\n\n  const minutes = Math.floor(timer.elapsedMs / 60000);\n  const seconds = Math.floor((timer.elapsedMs % 60000) / 1000);\n  const milliseconds = Math.floor((timer.elapsedMs % 1000) / 10);\n\n  const containerClasses = [\n    \"group flex items-center w-full max-w-4xl mx-auto px-4 py-3 rounded-xl border bg-card transition-all duration-200 cursor-pointer\",\n    \"border-border\",\n    isPrimary ? \"ring-1 ring-chrono-accent/40\" : \"\",\n    isZenMode ? \"hover:bg-muted\" : \"\",\n  ]\n    .filter(Boolean)\n    .join(\" \");\n\n  return (\n    <div\n      className={containerClasses}\n      draggable\n      onDragStart={onDragStart}\n      onDragOver={onDragOver}\n      onDrop={onDrop}\n      onClick={onPromote}\n    >\n\n      <div className=\"flex flex-col flex-1 min-w-0 mr-3\">\n        <input\n          type=\"text\"\n          value={timer.label}\n          onChange={(event: any) =>\n            onUpdateLabel(event.target.value)\n          }\n          onClick={(event: any) =>\n            event.stopPropagation()\n          }\n          placeholder=\"Timer name\"\n          className=\"w-full bg-transparent text-sm text-chrono-fg-muted focus:text-foreground outline-none border-b border-transparent focus:border-chrono-accent/40 truncate\"\n        />\n\n        <div\n          className=\"mt-1 flex items-baseline font-chronoNumber chrono-number text-base tracking-tight text-foreground\"\n          onClick={(event: any) => {\n            event.stopPropagation();\n            onToggle();\n          }}\n        >\n          <span className=\"tabular-nums\">\n            {minutes.toString().padStart(2, \"0\")}:{seconds\n              .toString()\n              .padStart(2, \"0\")}\n          </span>\n          <span className=\"ml-1 text-xs text-muted-foreground\">\n            .{milliseconds.toString().padStart(2, \"0\")}\n          </span>\n        </div>\n      </div>\n\n      <div\n        className=\"flex items-center gap-2 ml-auto\"\n        onClick={(event: any) => event.stopPropagation()}\n      >\n        <button\n          onClick={onReset}\n          className=\"p-1.5 rounded-full bg-transparent text-foreground hover:bg-muted transition-colors\"\n          title=\"Reset\"\n        >\n          <Square size={18} />\n        </button>\n\n        <button\n          onClick={onToggle}\n          className={[\n            \"p-1.5 rounded-full bg-transparent transition-colors\",\n            timer.isRunning\n              ? \"text-chrono-accent hover:text-chrono-accent\"\n              : \"text-foreground hover:text-chrono-accent\",\n          ].join(\" \")}\n          title={timer.isRunning ? \"Pause\" : \"Start\"}\n        >\n          {timer.isRunning ? (\n            <Pause size={18} />\n          ) : (\n            <Play size={18} />\n          )}\n        </button>\n\n        <button\n          onClick={onDelete}\n          className=\"p-2 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted transition-colors\"\n          title=\"Delete timer\"\n        >\n          <Trash2 size={18} />\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;;;AAiBe,SAAS,iBAAiB,KAA4B;IACnE,MAAM,EACJ,KAAK,EACL,SAAS,EACT,SAAS,EACT,cAAc,EACd,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,aAAa,EACb,SAAS,EACT,WAAW,EACX,UAAU,EACV,MAAM,EACP,GAAG;IAEJ,MAAM,UAAU,KAAK,KAAK,CAAC,MAAM,SAAS,GAAG;IAC7C,MAAM,UAAU,KAAK,KAAK,CAAC,AAAC,MAAM,SAAS,GAAG,QAAS;IACvD,MAAM,eAAe,KAAK,KAAK,CAAC,AAAC,MAAM,SAAS,GAAG,OAAQ;IAE3D,MAAM,mBAAmB;QACvB;QACA;QACA,YAAY,iCAAiC;QAC7C,YAAY,mBAAmB;KAChC,CACE,MAAM,CAAC,SACP,IAAI,CAAC;IAER,qBACE,6LAAC;QACC,WAAW;QACX,SAAS;QACT,aAAa;QACb,YAAY;QACZ,QAAQ;QACR,SAAS;;0BAGT,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,MAAK;wBACL,OAAO,MAAM,KAAK;wBAClB,UAAU,CAAC,QACT,cAAc,MAAM,MAAM,CAAC,KAAK;wBAElC,SAAS,CAAC,QACR,MAAM,eAAe;wBAEvB,aAAY;wBACZ,WAAU;;;;;;kCAGZ,6LAAC;wBACC,WAAU;wBACV,SAAS,CAAC;4BACR,MAAM,eAAe;4BACrB;wBACF;;0CAEA,6LAAC;gCAAK,WAAU;;oCACb,QAAQ,QAAQ,GAAG,QAAQ,CAAC,GAAG;oCAAK;oCAAE,QACpC,QAAQ,GACR,QAAQ,CAAC,GAAG;;;;;;;0CAEjB,6LAAC;gCAAK,WAAU;;oCAAqC;oCACjD,aAAa,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;;;;;;;;;;;;;;0BAK5C,6LAAC;gBACC,WAAU;gBACV,SAAS,CAAC,QAAe,MAAM,eAAe;;kCAE9C,6LAAC;wBACC,SAAS;wBACT,WAAU;wBACV,OAAM;kCAEN,cAAA,6LAAC,mNAAM;4BAAC,MAAM;;;;;;;;;;;kCAGhB,6LAAC;wBACC,SAAS;wBACT,WAAW;4BACT;4BACA,MAAM,SAAS,GACX,gDACA;yBACL,CAAC,IAAI,CAAC;wBACP,OAAO,MAAM,SAAS,GAAG,UAAU;kCAElC,MAAM,SAAS,iBACd,6LAAC,gNAAK;4BAAC,MAAM;;;;;iDAEb,6LAAC,6MAAI;4BAAC,MAAM;;;;;;;;;;;kCAIhB,6LAAC;wBACC,SAAS;wBACT,WAAU;wBACV,OAAM;kCAEN,cAAA,6LAAC,uNAAM;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;AAKxB;KA9GwB"}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":["file:///home/jack/Apps/minimal-stopwatch/lib/supabase-client.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  // We intentionally do not throw here so the rest of the UI can still render\n  // without Supabase. The owner will provide the correct env values.\n  console.warn(\n    \"Supabase environment variables are not set. NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are required for auth and persistence.\",\n  );\n}\n\nexport const supabase = supabaseUrl && supabaseAnonKey\n  ? createClient(supabaseUrl, supabaseAnonKey)\n  : null;\n"],"names":[],"mappings":";;;;AAEoB;;;;;;;AAApB,MAAM,cAAc,2KAAO,CAAC,GAAG,CAAC,wBAAwB;AACxD,MAAM,kBAAkB,2KAAO,CAAC,GAAG,CAAC,6BAA6B;AAEjE,IAAI,CAAC,eAAe,CAAC,iBAAiB;IACpC,4EAA4E;IAC5E,mEAAmE;IACnE,QAAQ,IAAI,CACV;AAEJ;AAEO,MAAM,WAAW,eAAe,kBACnC,aAAa,aAAa,mBAC1B"}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///home/jack/Apps/minimal-stopwatch/features/stopwatch/components/stopwatch-app.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useMemo, useRef, useState, DragEvent } from \"react\";\nimport { Eye, EyeOff, Maximize2, Minimize2, Plus, Moon, Sun } from \"lucide-react\";\nimport type { Timer } from \"@/features/stopwatch/types\";\nimport TimerCard from \"@/features/stopwatch/components/timer-card\";\nimport CompactTimerCard from \"@/features/stopwatch/components/compact-timer-card\";\nimport { supabase } from \"@/lib/supabase-client\";\n\ntype StopwatchAppProps = {\n  userId?: string | null;\n};\n\nexport default function StopwatchApp({ userId }: StopwatchAppProps) {\n  const [timers, setTimers] = useState<Timer[]>([\n    {\n      id: 1,\n      label: \"Untitled\",\n      isRunning: false,\n      elapsedMs: 0,\n    },\n  ]);\n\n  const [isZenMode, setIsZenMode] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [draggedId, setDraggedId] = useState<number | null>(null);\n  const [primaryId, setPrimaryId] = useState<number | null>(1);\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"light\");\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const supa = supabase;\n\n  const hasRunningTimer = useMemo(\n    () => timers.some((timer) => timer.isRunning),\n    [timers]\n  );\n\n  useEffect(() => {\n    if (!hasRunningTimer) {\n      return;\n    }\n\n    let frameId: number;\n    let lastTime = performance.now();\n\n    const loop = (time: number) => {\n      const delta = time - lastTime;\n      lastTime = time;\n\n      setTimers((previous) =>\n        previous.map((timer) =>\n          timer.isRunning\n            ? { ...timer, elapsedMs: timer.elapsedMs + delta }\n            : timer\n        )\n      );\n\n      frameId = requestAnimationFrame(loop);\n    };\n\n    frameId = requestAnimationFrame(loop);\n\n    return () => {\n      cancelAnimationFrame(frameId);\n    };\n  }, [hasRunningTimer]);\n\n  // Load persisted timers for this user from Supabase (if configured)\n  useEffect(() => {\n    if (!supa || !userId) return;\n\n    let cancelled = false;\n\n    const load = async () => {\n      try {\n        const { data, error } = await (supa\n          .from(\"timer_states\")\n          .select(\"timers, primary_id\")\n          .eq(\"user_id\", userId)\n          .maybeSingle() as any);\n\n        if (error) {\n          console.error(\"Failed to load timers from Supabase\", error);\n          return;\n        }\n\n        if (!data) {\n          // No state yet – seed with current in-memory timers\n          await supa.from(\"timer_states\").insert({\n            user_id: userId,\n            timers,\n            primary_id: primaryId,\n          });\n          return;\n        }\n\n        if (!cancelled && data.timers) {\n          const remoteTimers = data.timers as Timer[];\n          setTimers(remoteTimers);\n          const remotePrimary =\n            (data as any).primary_id ?? remoteTimers[0]?.id ?? null;\n          setPrimaryId(remotePrimary);\n        }\n      } catch (error) {\n        console.error(\"Failed to initialize timers from Supabase\", error);\n      }\n    };\n\n    void load();\n\n    return () => {\n      cancelled = true;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [supa, userId]);\n\n  // Persist timers whenever they change for an authenticated user\n  useEffect(() => {\n    if (!supa || !userId) return;\n\n    const persist = async () => {\n      try {\n        await supa.from(\"timer_states\").upsert(\n          {\n            user_id: userId,\n            timers,\n            primary_id: primaryId,\n          },\n          { onConflict: \"user_id\" },\n        );\n      } catch (error) {\n        console.error(\"Failed to persist timers to Supabase\", error);\n      }\n    };\n\n    void persist();\n  }, [supa, userId, timers, primaryId]);\n\n  // Initialize theme from localStorage or system preference\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n\n    const stored = window.localStorage.getItem(\"chrono-theme\");\n    if (stored === \"light\" || stored === \"dark\") {\n      setTheme(stored);\n      return;\n    }\n\n    const prefersDark = window.matchMedia?.(\"(prefers-color-scheme: dark)\")?.matches;\n    setTheme(prefersDark ? \"dark\" : \"light\");\n  }, []);\n\n  // Apply theme class and persist\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    document.documentElement.classList.toggle(\"dark\", theme === \"dark\");\n    window.localStorage.setItem(\"chrono-theme\", theme);\n  }, [theme]);\n\n  useEffect(() => {\n    const target = containerRef.current;\n    if (!target) {\n      return;\n    }\n\n    const handleChange = () => {\n      const active = Boolean(document.fullscreenElement);\n      setIsFullscreen(active);\n    };\n\n    document.addEventListener('fullscreenchange', handleChange);\n\n    return () => {\n      document.removeEventListener('fullscreenchange', handleChange);\n    };\n  }, []);\n\n  const addTimer = () => {\n    setTimers((previous) => {\n      const nextId =\n        previous.length > 0\n          ? Math.max(...previous.map((timer) => timer.id)) + 1\n          : 1;\n\n      const newTimer = {\n        id: nextId,\n        label: \"Untitled\",\n        isRunning: false,\n        elapsedMs: 0,\n      } as Timer;\n\n      // If we already have a primary timer, insert new timers\n      // directly after it so new histories appear at the top.\n      let nextTimers: Timer[];\n      if (previous.length > 0 && primaryId !== null) {\n        const primaryIndex = previous.findIndex((t) => t.id === primaryId);\n        if (primaryIndex >= 0) {\n          nextTimers = [...previous];\n          nextTimers.splice(primaryIndex + 1, 0, newTimer);\n        } else {\n          nextTimers = [...previous, newTimer];\n        }\n      } else {\n        nextTimers = [...previous, newTimer];\n      }\n\n      // Keep current primary; new timers start as compact/history by default\n      if (previous.length === 0) {\n        setPrimaryId(nextId);\n      }\n\n      return nextTimers;\n    });\n  };\n\n  const removeTimer = (id: number) => {\n    setTimers((previous) => {\n      if (previous.length <= 1) {\n        return previous;\n      }\n\n      const next = previous.filter((timer) => timer.id !== id);\n\n      if (primaryId === id) {\n        const nextPrimary = next.length > 0 ? next[0].id : null;\n        setPrimaryId(nextPrimary);\n      }\n\n      return next;\n    });\n  };\n\n  const updateLabel = (id: number, label: string) => {\n    setTimers((previous) =>\n      previous.map((timer) =>\n        timer.id === id\n          ? {\n              ...timer,\n              label,\n            }\n          : timer\n      )\n    );\n  };\n\n  const toggleTimer = (id: number) => {\n    setTimers((previous) =>\n      previous.map((timer) =>\n        timer.id === id\n          ? {\n              ...timer,\n              isRunning: !timer.isRunning,\n            }\n          : timer\n      )\n    );\n  };\n\n  const resetTimer = (id: number) => {\n    setTimers((previous) => {\n      const target = previous.find((timer) => timer.id === id);\n      if (!target) {\n        return previous;\n      }\n\n      const shouldCreateHistory = target.isRunning && target.elapsedMs > 0;\n\n      // Reset the original timer\n      let nextTimers = previous.map((timer) =>\n        timer.id === id\n          ? {\n              ...timer,\n              isRunning: false,\n              elapsedMs: 0,\n            }\n          : timer\n      );\n\n      if (shouldCreateHistory) {\n        const nextId =\n          previous.length > 0\n            ? Math.max(...previous.map((timer) => timer.id)) + 1\n            : 1;\n        const historyTimer: Timer = {\n          id: nextId,\n          label: target.label,\n          isRunning: false,\n          elapsedMs: target.elapsedMs,\n        };\n\n        // Insert new history directly after the primary timer so\n        // newest histories appear at the top of the history list.\n        const primaryIndex =\n          primaryId !== null\n            ? nextTimers.findIndex((timer) => timer.id === primaryId)\n            : -1;\n\n        if (primaryIndex >= 0) {\n          const withHistory = [...nextTimers];\n          withHistory.splice(primaryIndex + 1, 0, historyTimer);\n          nextTimers = withHistory;\n        } else {\n          nextTimers = [historyTimer, ...nextTimers];\n        }\n      }\n\n      return nextTimers;\n    });\n  };\n\n  const handleDragStart = (event: DragEvent<HTMLDivElement>, id: number) => {\n    setDraggedId(id);\n    event.dataTransfer.effectAllowed = 'move';\n    event.dataTransfer.setData('text/plain', String(id));\n  };\n\n  const handleDragOver = (event: DragEvent<HTMLDivElement>, targetId: number) => {\n    event.preventDefault();\n\n    if (draggedId === null || draggedId === targetId) {\n      return;\n    }\n\n    setTimers((previous) => {\n      const sourceIndex = previous.findIndex((timer) => timer.id === draggedId);\n      const targetIndex = previous.findIndex((timer) => timer.id === targetId);\n\n      if (sourceIndex === -1 || targetIndex === -1) {\n        return previous;\n      }\n\n      if (sourceIndex === targetIndex) {\n        return previous;\n      }\n\n      const updated = [...previous];\n      const [moved] = updated.splice(sourceIndex, 1);\n      updated.splice(targetIndex, 0, moved);\n\n      // If we dragged a history timer onto the primary timer, promote the dragged timer\n      if (primaryId !== null && targetId === primaryId && draggedId !== primaryId) {\n        setPrimaryId(draggedId);\n      }\n\n      // If we dragged the primary timer onto a history timer, promote the target timer\n      if (primaryId !== null && draggedId === primaryId && targetId !== primaryId) {\n        setPrimaryId(targetId);\n      }\n\n      return updated;\n    });\n  };\n\n  const handleDrop = (event: DragEvent<HTMLDivElement>) => {\n    event.preventDefault();\n    setDraggedId(null);\n  };\n\n  const toggleZenMode = () => {\n    setIsZenMode((value) => !value);\n  };\n\n  const toggleTheme = () => {\n    setTheme((value) => (value === \"light\" ? \"dark\" : \"light\"));\n  };\n\n  const toggleFullscreen = () => {\n    const element = containerRef.current;\n\n    if (!element) {\n      return;\n    }\n\n    if (!document.fullscreenElement) {\n      element.requestFullscreen().catch(() => undefined);\n    } else {\n      document.exitFullscreen().catch(() => undefined);\n    }\n  };\n\n  const promoteTimer = (id: number) => {\n    setPrimaryId(id);\n  };\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"h-screen bg-chrono-bg-page text-foreground font-sans selection:bg-muted overflow-hidden\"\n    >\n      {/* Top toolbar */}\n      <div\n        className={[\n          \"fixed top-0 left-0 right-0 p-6 flex justify-between items-center z-50 transition-opacity duration-500\",\n          isZenMode || isFullscreen\n            ? \"opacity-0 hover:opacity-100\"\n            : \"opacity-100\",\n        ]\n          .filter(Boolean)\n          .join(\" \")}\n      >\n        <h1 className=\"text-xl font-bold text-chrono-fg-muted tracking-widest uppercase hidden sm:block\">\n          Chrono<span className=\"text-foreground\">Minimal</span>\n        </h1>\n\n        <div className=\"flex items-center gap-2 bg-card/80 backdrop-blur-md p-1.5 rounded-full border border-border ml-auto\">\n          <button\n            onClick={toggleZenMode}\n            className={[\n              \"p-2 rounded-full transition-colors\",\n              isZenMode\n                ? \"bg-chrono-accent text-background\"\n                : \"text-muted-foreground hover:text-foreground hover:bg-card\",\n            ]\n              .filter(Boolean)\n              .join(\" \")}\n            title=\"Zen mode\"\n          >\n            {isZenMode ? <EyeOff size={20} /> : <Eye size={20} />}\n          </button>\n\n          <button\n            onClick={toggleTheme}\n            className=\"p-2 rounded-full text-muted-foreground hover:text-foreground hover:bg-card transition-colors\"\n            title={theme === \"dark\" ? \"Switch to light mode\" : \"Switch to dark mode\"}\n          >\n            {theme === \"dark\" ? <Sun size={20} /> : <Moon size={20} />}\n          </button>\n\n          <button\n            onClick={toggleFullscreen}\n            className=\"p-2 rounded-full text-muted-foreground hover:text-foreground hover:bg-card transition-colors\"\n            title=\"Fullscreen\"\n          >\n            {isFullscreen ? <Minimize2 size={20} /> : <Maximize2 size={20} />}\n          </button>\n\n          <div className=\"w-px h-6 bg-border mx-1\" />\n\n          <button\n            onClick={addTimer}\n            className=\"p-2 rounded-full bg-card text-foreground hover:bg-card/80 transition-colors\"\n            title=\"Add stopwatch\"\n          >\n            <Plus size={20} />\n          </button>\n        </div>\n      </div>\n\n      {/* Main content: primary timer + history */}\n      <div\n        className={[\n          \"min-h-screen flex flex-col items-center p-4 transition-all duration-500 gap-6\",\n          timers.length >= 1 ? \"pt-24 pb-24\" : \"justify-center\",\n        ]\n          .filter(Boolean)\n          .join(\" \")}\n      >\n        {timers.length > 0 && (() => {\n          const currentPrimaryId =\n            primaryId && timers.some((timer) => timer.id === primaryId)\n              ? primaryId\n              : timers[0].id;\n\n          const primaryTimer = timers.find(\n            (timer) => timer.id === currentPrimaryId,\n          )!;\n\n          const secondaryTimers = timers.filter(\n            (timer) => timer.id !== currentPrimaryId,\n          );\n\n          return (\n            <>\n              <TimerCard\n                timer={primaryTimer}\n                totalTimers={timers.length}\n                isZenMode={isZenMode}\n                isBeingDragged={draggedId === primaryTimer.id}\n                onToggle={() => toggleTimer(primaryTimer.id)}\n                onReset={() => resetTimer(primaryTimer.id)}\n                onDelete={() => removeTimer(primaryTimer.id)}\n                onUpdateLabel={(label) => updateLabel(primaryTimer.id, label)}\n                onDragStart={(event) => handleDragStart(event, primaryTimer.id)}\n                onDragOver={(event) => handleDragOver(event, primaryTimer.id)}\n                onDrop={handleDrop}\n              />\n\n              <div className=\"w-full max-w-4xl mt-4\">\n                <div className=\"mb-2 flex items-baseline justify-between text-xs text-chrono-fg-muted\">\n                  <span>Total: {secondaryTimers.length}</span>\n                </div>\n                <div className=\"chrono-scroll max-h-[36vh] overflow-y-auto pr-1 flex flex-col gap-3 pb-32\">\n                  {secondaryTimers.map((timer) => (\n                    <CompactTimerCard\n                      key={timer.id}\n                      timer={timer}\n                      isPrimary={false}\n                      isZenMode={isZenMode}\n                      isBeingDragged={draggedId === timer.id}\n                      onToggle={() => toggleTimer(timer.id)}\n                      onReset={() => resetTimer(timer.id)}\n                      onDelete={() => removeTimer(timer.id)}\n                      onUpdateLabel={(label) => updateLabel(timer.id, label)}\n                      onPromote={() => promoteTimer(timer.id)}\n                      onDragStart={(event) => handleDragStart(event, timer.id)}\n                      onDragOver={(event) => handleDragOver(event, timer.id)}\n                      onDrop={handleDrop}\n                    />\n                  ))}\n                </div>\n              </div>\n            </>\n          );\n        })()}\n        {/* Fixed + button aligned with history area (bottom-right within max-w-4xl) */}\n        <div className=\"fixed bottom-12 left-1/2 -translate-x-1/2 w-full max-w-4xl px-4 flex justify-end pointer-events-none\">\n          <button\n            onClick={addTimer}\n            className=\"flex h-12 w-12 items-center justify-center rounded-full bg-foreground text-background shadow-md hover:shadow-lg transition-shadow pointer-events-auto\"\n            aria-label=\"Add timer\"\n          >\n            <Plus size={22} />\n          </button>\n        </div>\n\n        {/* Helper text at bottom of viewport */}\n        <div\n          className={[\n            \"fixed bottom-4 left-0 right-0 text-center text-chrono-fg-muted text-sm pointer-events-none transition-opacity duration-500\",\n            isZenMode ? \"opacity-0\" : \"opacity-100\",\n          ]\n            .filter(Boolean)\n            .join(\" \")}\n        >\n          Click time to start or stop. Drag handle to reorder.\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1112, "column": 0}, "map": {"version":3,"sources":["file:///home/jack/Apps/minimal-stopwatch/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 1130, "column": 0}, "map": {"version":3,"sources":["file:///home/jack/Apps/minimal-stopwatch/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nexport type CardProps = React.HTMLAttributes<HTMLDivElement>;\n\nexport function Card({ className, ...props }: CardProps) {\n  return (\n    <div\n      className={cn(\n        \"rounded-2xl border border-chrono-border-subtle bg-chrono-bg-card/70 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAIO,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAkB;IACrD,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAVgB"}},
    {"offset": {"line": 1158, "column": 0}, "map": {"version":3,"sources":["file:///home/jack/Apps/minimal-stopwatch/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nexport type InputProps = React.InputHTMLAttributes<HTMLInputElement>;\n\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <input\n        ref={ref}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-chrono-border-subtle bg-transparent px-3 py-1 text-sm text-chrono-fg-primary placeholder:text-chrono-fg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-chrono-accent\",\n          className\n        )}\n        {...props}\n      />\n    );\n  }\n);\n\nInput.displayName = \"Input\";\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIO,MAAM,sBAAQ,2KAAgB,MACnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,2OACA;QAED,GAAG,KAAK;;;;;;AAGf;;AAGF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 1191, "column": 0}, "map": {"version":3,"sources":["file:///home/jack/Apps/minimal-stopwatch/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nexport type ButtonProps = React.ButtonHTMLAttributes<HTMLButtonElement>;\n\nexport function Button({ className, ...props }: ButtonProps) {\n  return (\n    <button\n      className={cn(\n        \"inline-flex items-center justify-center rounded-full text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-chrono-accent focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:opacity-50 disabled:pointer-events-none bg-card text-foreground hover:bg-card/80 px-4 py-2\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAIO,SAAS,OAAO,EAAE,SAAS,EAAE,GAAG,OAAoB;IACzD,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,oVACA;QAED,GAAG,KAAK;;;;;;AAGf;KAVgB"}},
    {"offset": {"line": 1219, "column": 0}, "map": {"version":3,"sources":["file:///home/jack/Apps/minimal-stopwatch/features/auth/auth-gate.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, type ReactNode } from \"react\";\nimport type { User } from \"@supabase/supabase-js\";\nimport { supabase } from \"@/lib/supabase-client\";\nimport { Card } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\n\nexport type AuthGateProps = {\n  children: (props: { user: User | null }) => ReactNode;\n};\n\nexport function AuthGate({ children }: AuthGateProps) {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [mode, setMode] = useState<\"sign-in\" | \"sign-up\">(\"sign-in\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // If Supabase is not configured yet, skip auth gating so the\n  // app still works in local/demo mode.\n  const supa = supabase;\n\n  useEffect(() => {\n    if (!supa) {\n      setLoading(false);\n      return;\n    }\n\n    const setup = async () => {\n      const { data, error } = await supa.auth.getSession();\n      if (!error) {\n        setUser(data.session?.user ?? null);\n      }\n      setLoading(false);\n    };\n\n    void setup();\n\n    const { data } = supa.auth.onAuthStateChange((_event: any, session: any) => {\n      setUser(session?.user ?? null);\n    });\n\n    return () => {\n      data.subscription.unsubscribe();\n    };\n  }, [supa]);\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    if (!supa) return;\n\n    setSubmitting(true);\n    setError(null);\n\n    try {\n      if (mode === \"sign-in\") {\n        const { error } = await supa.auth.signInWithPassword({\n          email,\n          password,\n        });\n        if (error) throw error;\n      } else {\n        const { error } = await supa.auth.signUp({\n          email,\n          password,\n        });\n        if (error) throw error;\n      }\n    } catch (err: any) {\n      setError(err?.message ?? \"Authentication failed\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  if (!supa) {\n    // Env not set yet – render children without auth.\n    return <>{children({ user: null })}</>;\n  }\n\n  if (loading) {\n    return (\n      <div className=\"h-screen bg-chrono-bg-page flex items-center justify-center\">\n        <span className=\"text-chrono-fg-muted text-sm\">Loading...</span>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"h-screen bg-chrono-bg-page flex items-center justify-center px-4\">\n        <Card className=\"w-full max-w-sm px-6 py-5 bg-card/90\">\n          <div className=\"mb-4 flex items-center justify-between\">\n            <h2 className=\"text-sm font-medium text-foreground tracking-wide uppercase\">\n              Chrono<span className=\"font-normal text-chrono-fg-muted\">Minimal</span>\n            </h2>\n            <button\n              type=\"button\"\n              onClick={() => setMode(mode === \"sign-in\" ? \"sign-up\" : \"sign-in\")}\n              className=\"text-xs text-chrono-fg-muted hover:text-foreground underline-offset-4 hover:underline\"\n            >\n              {mode === \"sign-in\" ? \"Need an account?\" : \"Have an account?\"}\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-3\">\n            <div className=\"space-y-1\">\n              <label className=\"block text-xs text-chrono-fg-muted\">Email</label>\n              <Input\n                type=\"email\"\n                autoComplete=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </div>\n\n            <div className=\"space-y-1\">\n              <label className=\"block text-xs text-chrono-fg-muted\">Password</label>\n              <Input\n                type=\"password\"\n                autoComplete={mode === \"sign-in\" ? \"current-password\" : \"new-password\"}\n                required\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n\n            {error && (\n              <p className=\"text-xs text-red-500 mt-1\">{error}</p>\n            )}\n\n            <Button\n              type=\"submit\"\n              disabled={submitting}\n              className=\"w-full mt-2\"\n            >\n              {submitting\n                ? mode === \"sign-in\"\n                  ? \"Signing in...\"\n                  : \"Signing up...\"\n                : mode === \"sign-in\"\n                  ? \"Sign in\"\n                  : \"Sign up\"}\n            </Button>\n          </form>\n        </Card>\n      </div>\n    );\n  }\n\n  return <>{children({ user })}</>;\n}\n"],"names":[],"mappings":"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"}}]
}